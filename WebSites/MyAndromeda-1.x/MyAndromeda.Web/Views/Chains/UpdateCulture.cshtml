@using MyAndromeda.Web.ViewModels;
@{
    var cultures = System.Globalization.CultureInfo.GetCultures(System.Globalization.CultureTypes.AllCultures);
    var models = cultures.Select(e => new
    {
        Name = System.Globalization.CultureInfo.CreateSpecificCulture(e.Name).Name,
        e.EnglishName
    }).OrderBy(e=> e.Name);
}
@model ChainUpdateCultureViewModel

<div class="header">
    <h3>@Model.Chain.Name culture:</h3>
</div>
<div id="ChainForm">
    @using (Html.BeginForm())
    {
        @Html.AntiForgeryToken()
        @Html.HiddenFor(e=> e.ReturnUrl)
        
        <div>
            <label for="@Html.IdFor(e => e.Chain.Culture)"></label>
            <input id="@Html.IdFor(e => e.Chain.Culture)" name="@Html.NameFor(e => e.Chain.Culture)" 
                style="width:300px"
            data-role="combobox"
            @*data-header-template="#cultureValueTemplate"*@
            data-template="cultureValueTemplate"
            data-text-field="englishName"
            data-value-field="name"
            data-filter="contains"
            data-bind="source: data, value: culture"
            />
        </div>
        <div>
            <input class="k-button" type="submit" value="Save" />
        </div>
    }
</div>

@using (Html.BeginScripts()) 
{
    <script type="text/x-kendo-template" id="cultureValueTemplate">
        (#: name #) #: englishName #
    </script>
}

@using (Html.BeginScripts())
{
    <script>
        $(function () {
            var data = @models.JsonNetToString(true, false);
                
            var vm = kendo.observable({
                culture: '@Model.Chain.Culture',
                data: data
            });
            kendo.bind($("#ChainForm"), vm);
        });
    </script>
}