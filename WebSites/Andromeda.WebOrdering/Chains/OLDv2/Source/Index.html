<!DOCTYPE html>
<html>
<head>
<!--
    Copyright © 2014 Andromeda Trading Limited.  All rights reserved.  
    THIS FILE AND ITS CONTENTS ARE PROTECTED BY COPYRIGHT AND/OR OTHER APPLICABLE LAW. 
    ANY USE OF THE CONTENTS OF THIS FILE OR ANY PART OF THIS FILE WITHOUT EXPLICIT PERMISSION FROM ANDROMEDA TRADING LIMITED IS PROHIBITED. 
-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title id="title"></title>
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />

    <!--<link rel="stylesheet" type="text/css" href="/Source/StyleSheets/WebOrdering.css" />
    <link rel="stylesheet" type="text/css" href="/Source/StyleSheets/WebOrderingMobile.css" media="screen and (max-width: 600px)" />
    <link rel="stylesheet" type="text/css" href="/Source/StyleSheets/WebOrderingPCandTablet.css" media="screen and (min-width: 601px)" />
    <link rel="stylesheet" type="text/css" href="/Source/StyleSheets/WebOrderingPC.css" media="screen and (min-width: 601px)" />-->
    
    <link rel="stylesheet" type="text/css" href="Content/Styles.css" />
    <link rel="stylesheet" type="text/css" href="Content/Skin.css" />
    <link rel="stylesheet" type="text/css" href="Custom/Custom.css" />

    <script type="text/javascript">

        // Translation strings
        var textStrings = undefined;

        // Settings
        var settings = undefined;

        // CSS Class/Id names
        var css_menu = 'sectionsWrapper';
        var css_sections = 'sections';
        var css_section = 'section';

    </script>

    <script src="Content/Scripts.js" type="text/javascript"></script>
    
    <!--
    <script src="Source/ResourceStrings/en-GB.js" type="text/javascript"></script>
    <script src="Source/ResourceStrings/fr-FR.js" type="text/javascript"></script>

    <script src="Source/Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script src="Source/Scripts/amplify.min.js" type="text/javascript"></script>
    <script src="Source/Scripts/jquery.history.js" type="text/javascript"></script>
    <script src="Source/Scripts/knockout-2.2.1.js" type="text/javascript"></script>
    <script src="Source/Scripts/modernizr.min.js" type="text/javascript"></script>
    <script src="Source/Scripts/OpenLayers.js" type="text/javascript"></script>

    <script src="Source/Scripts/Settings.js" type="text/javascript"></script>
    <script src="Source/Scripts/ACSAPI.js" type="text/javascript"></script>

    <script src="Source/ViewModels/viewModel.js"</script>
    <script src="Source/ViewModels/accountHelper.js"</script>
    <script src="Source/ViewModels/cacheHelper.js"</script>
    <script src="Source/ViewModels/cartHelper.js"</script>
    <script src="Source/ViewModels/checkoutHelper.js"</script>
    <script src="Source/ViewModels/checkoutMenuHelper.js"</script>
    <script src="Source/ViewModels/cookieHelper.js"</script>
    <script src="Source/ViewModels/dealHelper.js"</script>
    <script src="Source/ViewModels/dealPopupHelper.js"</script>
    <script src="Source/ViewModels/deliveryZoneHelper.js"</script>
    <script src="Source/ViewModels/guiHelper.js"</script>
    <script src="Source/ViewModels/helper.js"</script>
    <script src="Source/ViewModels/imageHelper.js"</script>
    <script src="Source/ViewModels/mapHelper.js"</script>
    <script src="Source/ViewModels/menuHelper.js"</script>
    <script src="Source/ViewModels/mobileMenuHelper.js"</script>
    <script src="Source/ViewModels/openingTimesHelper.js"</script>
    <script src="Source/ViewModels/popupHelper.js"</script>
    <script src="Source/ViewModels/postcodeCheckHelper.js"</script>
    <script src="Source/ViewModels/queryStringHelper.js"</script>
    <script src="Source/ViewModels/siteSelectorHelper.js"</script>
    <script src="Source/ViewModels/tandcHelper.js"</script>
    -->
        
    <script src="Custom/Custom.js" type="text/javascript"></script>

    <script type="text/javascript">

        $(document).ready(viewModel.initialise);

    </script>

    <!-- Place holder for dynamically loaded resource strings -->
    <script type="text/javascript" id="resourceStrings"></script>
</head>
<body>

    <!-- PAGE HEADER -->

    <!-- ko if: mobileMenuHelper.isMobileMenuVisible()-->
    <header data-bind="attr: { class: (popupHelper.isBackgroundVisible() || dealPopupHelper.isBackgroundVisible()) ? 'headFootPopup' : 'headFootNoPopup' }">
        <!-- ko if: !guiHelper.isMobileMode() -->
        <div id="pageHeader">
            <div id="pageHeaderInner">
                
                <a id="logo" data-bind="attr: { href: settings.logoClickUrl }"></a>

                <div id="headerRight">

                    <div id="socialMedia">
                        <!-- ko if: settings.useAddThis -->
                        <!--<div style="float:left;" class="addthis_toolbox addthis_32x32_style addthis_default_style">
                            <a class="addthis_button_facebook_follow" addthis:userid="Charcoal-Grill/543548275681398"></a>-->
                            <!--<a class="addthis_button_twitter_follow" addthis:userid="@Demo72980636"></a>
                            <a class="addthis_button_instagram_follow" addthis:userid="demoandromeda"></a>-->
                        <!--</div>
                        <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=xa-51cd4bb34df56997"></script>-->

                        <div id="socialMediaAddThis" class="addthis_toolbox addthis_default_style addthis_32x32_style">
                            <!--<a class="addthis_button_compact"></a>
                            <a class="addthis_button_pinterest_share"></a>
                            <a class="addthis_button_google_plusone_share"></a>
                            <a class="addthis_button_twitter"></a>-->
                            <a class="addthis_button_facebook"></a>
                        </div>
                        <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=xa-51c026007093142e"></script>
                        <!-- /ko -->

                        <div id="twitter">
                            <a href="#" target="_blank" data-bind="attr: { href: settings.twitter, title: settings.twitter }, html: textStrings.hTwitter"></a>
                        </div>
                        <div id="facebook">
                            <a href="#" target="_blank" data-bind="attr: { href: settings.facebook, title: settings.facebook }, html: textStrings.hFacebook"></a>
                        </div>
                    </div>

                    <!-- ko ifnot: siteSelectorHelper.isPostcodeTextboxVisible -->
                    <!-- ko if: $root.siteDetails() != undefined -->
                    <div id="phone"><span data-bind="text: textStrings.hPhone"></span><span data-bind="text: siteDetails().phone"></span></div>
                    <!-- /ko -->

                    <div id="storeDetailsAddressWrapper">
                        <!-- ko if: $root.selectedSite() != undefined -->
                        <div id="storeDetailsAddress" data-bind="html: displayAddress"></div>
                        <!-- /ko -->
                    </div>

                    <!-- ko if: guiHelper.isMainMenuVisible -->
                    <div id="mainMenu">

                        <!-- Return to parent website -->
                        <!-- ko if: settings.showReturnToParentWebsite -->
                        <div id="menuReturnToParentWebsite" class="mainMenuButton">
                            <a data-bind="text: textStrings.hReturnToParentWebsiteButton, click: $root.returnToHostWebsite" href="#" ></a>   
                        </div> 
                        <!-- /ko -->

                        <!-- Delivery area check -->
                        <!-- ko if: settings.showDeliveryCheckButton && deliveryZoneHelper.deliveryZones() != undefined -->
                        <div id="menuDeliveryAreaCheck" class="mainMenuButton">
                            <a data-bind="text: textStrings.hDeliveryAreaButton, click: postcodeCheckHelper.showPopup" href="#" ></a>   
                        </div> 
                        <!-- /ko -->
                        
                        <!-- Select store -->
                        <!-- ko if: settings.showSelectStoresButton && viewModel.sites().length > 1 -->
                        <div id="menuSelectStore" class="mainMenuButton">
                            <a data-bind="text: textStrings.hChangeStoreButton, click: chooseStore" href="#"></a>
                        </div>
                        <!-- /ko -->

                        <!-- Menu -->
                        <!-- ko if: settings.showOrderNowButton -->
                        <div id="menuOrderNow" data-bind="attr: { class: guiHelper.isMenuVisible() ? 'mainMenuButtonSelected' : 'mainMenuButtonHighlighted' }">
                            <a data-bind="text: textStrings.hOrderNowButton, click: guiHelper.showMenu" href="#"></a> 
                        </div>
                        <!-- /ko -->   

                        <!-- Home -->
                        <!-- ko if: !settings.isHomePageDisabled -->
                        <div id="menuHome" data-bind="attr: { class: (!guiHelper.isMenuVisible() && $root.viewName() == 'homeView') ? 'mainMenuButtonSelected' : 'mainMenuButton' }">
                            <a data-bind="text: textStrings.hHomeButon, click: guiHelper.showHome" href="#"></a>
                        </div>  
                        <!-- /ko -->
                    </div>
                    <!-- /ko -->
                    <!-- /ko -->
                </div>
                
                <!-- xxko if: settings.storeSelectorMode && siteSelectorHelper.isPostcodeTextboxVisible -->
                <div id="siteSelectorPostcode" style="display:none;" data-bind="visible: settings.storeSelectorMode && siteSelectorHelper.isPostcodeTextboxVisible">
                    <div id="siteSelectorPostcodeTextbox">
                        <input id="siteSelectorPostcodeInput" autofocus data-bind="value: siteSelectorHelper.postcode, event: { 'keypress': siteSelectorHelper.siteSelectorPostcodeKeypress }" type="text" />
                    </div>

                    <!-- Check postcode button -->
                    <div id="siteSelectorPostcodeGoButton">
                        <a href="#" data-bind="click: siteSelectorHelper.checkPostcode"></a>
                    </div>

                    <!-- Postcode example -->
                    <div id="siteSelectorPostcodeExample" data-bind="text: textStrings.hSiteSelectorPostcodeExample">
                        <a href="#" data-bind="click: siteSelectorHelper.checkPostcode"></a>
                    </div>
                    
                    <!-- Show all sites button -->
                    <div id="siteSelectorShowSitesButton" class="mainMenuButton">
                        <a href="#" data-bind="text: textStrings.hShowAllRestaurants, click: siteSelectorHelper.showAllSites"></a>
                    </div>

                    <div id="badDeliveryZonePopup" class="deliveryZoneOk" data-bind="click: siteSelectorHelper.hideBadPostcode, attr: { class: siteSelectorHelper.isBadPostcode() ? 'badDeliveryZone' : 'deliveryZoneOk' }">
                    </div>

                </div>
                <!-- /xxko -->
            </div>    
        </div>
        <!-- /ko -->
        <!-- ko if: guiHelper.isMobileMode() -->
        <div id="mobileHeader">
            <div class="menuButton" data-bind="click: mobileMenuHelper.showPopup, visible: guiHelper.isMobileMenuVisible">
                <a href="#" data-bind="text: textStrings.mmOptions"></a>
            </div>
            <div style="float: left; padding-left: 40px;" data-bind="text: mobileMenuHelper.title, attr: { class: mobileMenuHelper.titleClass() }"></div>
            <!--<div class="addthis_toolbox addthis_default_style addthis_32x32_style" style="float:right; margin: 4px 2px 0 0; width: 32px;">-->
                <!--<a class="addthis_button_compact"></a>
                <a class="addthis_button_pinterest_share"></a>
                <a class="addthis_button_google_plusone_share"></a>
                <a class="addthis_button_twitter"></a>-->
                <!--<a class="addthis_button_facebook"></a>
            </div>
            <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=xa-51c026007093142e"></script>-->
        </div>
        <!-- /ko -->
    </header>
    <!-- /ko -->

    <!-- PAGE CONTENT (VIEW)-->
    <!-- ko if: guiHelper.isViewVisible -->
    <section id="viewContainer" data-bind="template: { name: viewName() }"></section>
    <!-- /ko -->

<!-- INSERT_VIEWS_HERE -->

    <!-- MENU -->
    <section id="menuSection" data-bind="visible: guiHelper.isMenuVisible, attr: { class: guiHelper.isInnerMenuVisible() ? 'menuSectionHasFocus' : 'menuSectionDoesntHaveFocus' }">
        <div class="menuPage">

            <!-- Cart -->
            <div id="rightColumn">
                <section data-bind="template: { name: 'cartView' }"></section>
            </div>

            <!-- The menu view -->
            <div data-bind="template: { name: menuViewName() }, visible: !guiHelper.isInnerMenuVisible()"></div>

            <!-- The menu -->
            <!-- Section headers -->
            <div id="sectionHeaders" data-bind="visible: guiHelper.isInnerMenuVisible()">

                <section>
                    <div id="sectionHeadersContainer">
                        <div id="sectionHeadersTop">
                            <h1 data-bind="text: textStrings.mMenuSections"></h1>
                        </div>

                        <!-- Item section headers -->
                        <div id="sectionHeadersContent">
                            <!-- ko foreach: sections -->
                            <div class="sectionHeader" data-bind="attr: { class: display.Name == $root.visibleSection() ? 'selectedSectionHeader' : 'sectionHeader' }">
                                <a data-bind="text: display.Name, click: $root.changeSection" href="#"></a>
                            </div>
                            <!-- /ko -->
                        </div>
                    </div>
                </section>
            </div>

            <!-- Sections -->
            <div id="sectionsWrapper" style="display: none;" data-bind="visible: guiHelper.isInnerMenuVisible()">
                <div class="sectionTitle">
                    <h1 data-bind="text: $root.selectedSection() != undefined ? $root.selectedSection().display.Name : ''"></h1>
                </div>
                <section id="sections">

                    <!-- Only visible on mobile devices (css) -->
                    <!-- ko if: guiHelper.isInnerMenuVisible -->
                    <div id="mobileMenuSections">
                        <select id="mobileMenuSectionsSelect" data-bind="options: sections, value: $root.selectedSection, optionsText: function (item) { return item.display.Name; }, event: { change: $root.changeSection }"></select>
                    </div>
                    <!-- /ko -->

                    <!-- Sections -->
                    <div id="sectionsContainer" data-bind="style: { height: $root.maxSectionHeight }">
                        <!-- ko foreach: sections -->
                            <!-- ko template: { name: menuHelper.getTemplateName } -->
                            <!-- /ko -->
                        <!-- /ko -->
                    </div>

                </section>
            </div>

        </div>
    </section>    

    <!-- Home menu section button -->
    <script type="text/html" id="homeSectionButton-template">
        <div class="homeMenuSection" data-bind="click: guiHelper.showMenuSection">
            <a data-bind="text: display.Name" href="#"></a>
        </div>
    </script>

    <!-- Postcode check popup -->
    <div id="postcodeCheck" style="display:none;" data-bind="template: { name: 'postcodeCheckView' }, visible: postcodeCheckHelper.isPopupVisible">
    </div>

    <!-- Image popup -->
    <div id="imagePopup" style="display:none;" data-bind="style: { height: imageHelper.image().Height + 25 + 'px', width: imageHelper.image().Width + 'px', marginTop: imageHelper.topOffset(), marginLeft: imageHelper.leftOffset() }, template: { name: 'imageView' }, visible: imageHelper.isPopupVisible">
    </div>

    <script type="text/html" id="imageView">
        <div id="imageInner" data-bind="click: imageHelper.hidePopup">
            <!-- ko if: menuHelper.menuDataThumbnails != undefined -->
            <img src="#" data-bind="attr: { src: menuHelper.menuDataThumbnails.Server.Endpoint + imageHelper.image().Src, height: imageHelper.image().Height + 'px', width: imageHelper.image().Width + 'px' }"  />
            <!-- /ko -->
            <p data-bind="text: textStrings.ivClose"></p>
        </div>
    </script>

    <!-- Login/register popup -->
    <div id="loginRegister" style="display:none;" data-bind="template: { name: 'loginRegisterView' }, visible: accountHelper.isPopupVisible">
    </div>

    <!-- Toppings popup background -->
    <div id="popupBoxBackground" data-bind="attr: { class: popupHelper.isBackgroundVisible() ? 'popupBoxBackgroundVisible' : 'popupBoxBackgroundHidden' }"></div>

    <!-- Toppings popup -->
    <div id="popupBox" class="popupBoxVisible" style="display:none;" data-bind="template: { name: 'toppingsView' }, visible: popupHelper.isPopupVisible">
    </div>

    <!-- Deal popup background -->
    <div id="dealPopupBoxBackground" data-bind="attr: { class: dealPopupHelper.isBackgroundVisible() ? 'dealPopupBoxBackgroundVisible' : 'dealPopupBoxBackgroundHidden' }"></div>

    <!-- Deal popup -->
    <div id="dealPopupBox" class="popupBoxVisible" style="display:none;" data-bind="template: { name: 'dealsView' }, visible: dealPopupHelper.isPopupVisible">
    </div>

    <!-- T&C popup -->
    <div id="tandcPopupBox" class="tandcPopupHidden" style="display:none;" data-bind="visible: tandcHelper.isPopupVisible, template: { name: 'tandcInternal' }">
    </div>

    <!-- T&C internal -->
    <script type="text/html" id="tandcInternal">
        <div id="tandcInner">
            <!-- Header -->
            <h1 data-bind="text: textStrings.tncTitle"></h1>
            <!--<div id="tandcText" data-bind="text: textStrings.tncNoTNC"></div>-->
            <div id="tandcText">
                <iframe src="Terms.html"></iframe>
            </div>
        </div>

        <div id="tandcButtons">
            <div id="tandcOkButton" class="button">
                <a href="#" data-bind="click: tandcHelper.hidePopup">OK</a>
            </div>
        </div>
    </script>

    <!-- T&C VIEW -->
    <script type="text/html" id="tandcView" >
        <div class="checkoutPage">
            <section>
                <!-- ko template: { name: 'tandcInternal' } --> <!-- /ko -->
            </section>
        </div>
    </script>

    <!-- Popup mobile menu -->
    <div id="popupMobileMenu" style="display:none;" data-bind="visible: mobileMenuHelper.isPopupVisible">
        <div id="popupMobileMenuOuter">
            <div id="popupMobileMenuInner">

                <h1 data-bind="text: textStrings.pmmOptions"></h1>

                <!-- HOME -->
                <!-- ko if: !settings.isHomePageDisabled -->
                <div class="popupMobileMenuButton popupMobileMenuHomeButton" data-bind="event: { click: mobileMenuHelper.showHome }">
                    <a href="#" data-bind="text: textStrings.pmmHome"></a>
                </div>
                <!-- /ko -->

                <!-- ORDER NOW -->
                <div class="popupMobileMenuButton popupMobileMenuOrderNowButton" data-bind="event: { click: mobileMenuHelper.showMenu }">
                    <a href="#" data-bind="text: textStrings.pmmOrderNow"></a>
                </div>

                <!-- CART -->
                <div class="popupMobileMenuButton popupMobileMenuCartButton" data-bind="event: { click: mobileMenuHelper.showCart }">
                    <a href="#" data-bind="text: textStrings.pmmMyOrder"></a>
                </div>

                <!-- POSTCODE CHECK -->
                <!-- ko if: settings.showDeliveryCheckButton && deliveryZoneHelper.deliveryZones() != undefined -->
                <div class="popupMobileMenuButton popupMobileMenuPostcodeCheckButton" data-bind="event: { click: mobileMenuHelper.showPostcodeCheck }">
                    <a href="#" data-bind="text: textStrings.pmmPostcode"></a>
                </div>
                <!-- /ko -->

                <!-- RETURN TO PARENT WEBSITE -->
                <!-- ko if: settings.showReturnToParentWebsite -->
                <div class="popupMobileMenuButton popupMobileMenuReturnToHostButton" data-bind="event: { click: $root.returnToHostWebsite }">
                    <a href="#" data-bind="text: textStrings.pmmReturnToParentWebsite"></a>
                </div>
                <!-- /ko -->

            </div>
        </div>
    </div>

    <!-- Mobile checkout menu -->
    <div id="mobileCheckoutMenu" style="display:none;" data-bind="visible: checkoutMenuHelper.isVisible">
        <!-- BACK BUTTON -->
        <div class="mobileCheckoutMenuButton">
            <!-- ko if: checkoutMenuHelper.backTo() == 'menu' -->
            <div class="mobileMenuButtonInner" data-bind="click: checkoutHelper.modifyOrder">
                <a href="#">BACK TO MENU</a>  
            </div>
            <!-- /ko -->
            <!-- ko if: checkoutMenuHelper.backTo() == 'checkout' -->
            <div class="mobileMenuButtonInner" data-bind="click: cartHelper.checkout">
                <a href="#">BACK TO CHECKOUT</a>  
            </div>
            <!-- /ko -->
            <!-- ko if: checkoutMenuHelper.backTo() == 'pay' -->
            <div class="mobileMenuButtonInner" data-bind="click: checkoutHelper.showPaymentPicker">
                <a href="#">BACK TO PAY</a>  
            </div>
            <!-- /ko -->
        </div>
        <!-- PLACE ORDER -->
        <!-- ko if: checkoutMenuHelper.isPlaceOrderEnabled -->
        <div class="mobileCheckoutMenuButton">
            <div class="mobileMenuButtonInner" data-bind="click: checkoutHelper.placeOrder">
                <a href="#">PLACE ORDER</a> 
            </div>
        </div>
        <!-- /ko -->
    </div>

    <div id="footer">
        <span data-bind="text: textStrings.footPoweredBy1"></span>
        <a href="http://andromedapos.com" target="_blank"  data-bind="text: textStrings.footPoweredBy2"></a>
    </div>
    
    <script type="text/javascript">
        // Additional JS functions here
        window.fbAsyncInit = function ()
        {
            FB.init
            (
                {
                    appId: settings.facebookAppId, // App ID
                    channelUrl: settings.facebookAppChannel, // Channel File
                    status: true, // check login status
                    cookie: true, // enable cookies to allow the server to access the session
                    xfbml: true  // parse XFBML
                }
            );

            // Here we subscribe to the auth.authResponseChange JavaScript event. This event is fired
            // for any authentication related change, such as login, logout or session refresh. This means that
            // whenever someone who was previously logged out tries to log in again, the correct case below 
            // will be handled. 
            FB.Event.subscribe
            (
                'auth.authResponseChange',
                function (response)
                {
                }
            );
        };

        // Load the SDK asynchronously
        (function (d)
        {
            var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
            if (d.getElementById(id)) { return; }
            js = d.createElement('script'); js.id = id; js.async = true;
            js.src = "//connect.facebook.net/en_US/all.js";
            ref.parentNode.insertBefore(js, ref);
        }(document));

    </script>

</body>
</html>
