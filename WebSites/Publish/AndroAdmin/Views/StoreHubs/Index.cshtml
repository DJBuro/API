@using AndroAdmin.Model;
@using AndroAdmin.ViewModels;

@model HubSelectionListViewModel
@{
    ViewBag.Title = "Store hubs";
    Layout = "~/Views/Shared/_StoresLayout.cshtml";    
}
@section Head 
{
    <script src="@Url.Content("~/Scripts/jquery-ui.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/bootstrap-timepicker.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/checkbox.js")" type="text/javascript"></script>
    
    <link rel="stylesheet" type="text/css" href="@Url.Content("~/Content/timepicker.css")" media="screen" />
    <link rel="stylesheet" type="text/css" href="@Url.Content("~/Content/checkbox.css")" media="screen" />
    <link rel="stylesheet" type="text/css" href="@Url.Content("~/Content/jqueryui.css")" />
}
    
<!-- Breadcrumb -->
<h2>@Html.ActionLink("Stores", "Index", "Store", new { }, new { }) / @Model.Name</h2>

<div id="StoreDetailsPage" class="ui-tabs ui-widget ui-widget-content ui-corner-all">

    <!-- Tabs -->
    @Html.Partial("~/Views/Store/StoreDetailsTabsPartial.cshtml", new StoreModel() { Store = new AndroAdminDataAccess.Domain.Store() { Id = Model.StoreId, Name = Model.Name } }, new ViewDataDictionary { { "SelectedTab", "Hubs" } })

    <div id="tabs-1" aria-labelledby="ui-id-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom" role="tabpanel" style="" aria-expanded="true" aria-hidden="false">
        <fieldset>
            <legend>Hub hardware key</legend>
            <a href="@Url.Action("MaintenanceReset", "StoreHubs", new { StoreId = Model.StoreId })" class="button" title="Reset the 'hardware key' associated with the site">Maintenance Reset</a>
            <p>Use this to reset the hardware key over all ACS cloud server</p>
        </fieldset>

@*        @if (Model.SelectedHubs.Count == 0)
        {
            <div>
                <p>There are no SingalR hubs directly associated with this store.</p>
                <a href="@Url.Action("Edit", new { Id = Model.StoreId })">Select hubs</a>
            </div>
        }
        else
        {
            <p>Below are a list of the SignalR hubs associated with this store.</p>
            <a href="@Url.Action("Edit", new { Id = Model.StoreId })">Edit</a>
            <table id="hubgrid">
                <colgroup>
                    <col style="width:100px" />
                    <col />
                    <col />
                </colgroup>
                <thead>
                    <tr>
                        <th>Active Hub</th>
                        <th>Name</th>
                        <th>Address</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model.SelectedHubs)
                    {
                        var hub = Model.AllHubs.FirstOrDefault(e => e.Id == item);
                        <tr>
                            <td>
                                @hub.Active
                            </td>
                            <td>
                                @hub.Name
                            </td>
                            <td>
                                @hub.Address
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        }*@

    </div>
</div>

<script type="text/javascript">
    $(function () {
        $("#hubgrid").dataTable();
    });
</script>
