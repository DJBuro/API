<!DOCTYPE html>
<html>
<head>
<!--
    Copyright © 2013 Andromeda Trading Limited.  All rights reserved.  
    THIS FILE AND ITS CONTENTS ARE PROTECTED BY COPYRIGHT AND/OR OTHER APPLICABLE LAW. 
    ANY USE OF THE CONTENTS OF THIS FILE OR ANY PART OF THIS FILE WITHOUT EXPLICIT PERMISSION FROM ANDROMEDA TRADING LIMITED IS PROHIBITED. 
-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title id="title"></title>
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />

    <script src="Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script src="Scripts/jquery.signalR-2.0.0.min.js"></script>
    <script src="signalrhub/signalr/hubs"></script>

    <script type="text/javascript">

        $(document).ready
        (
            function ()
            {
                $('#status').html('Connecting...');

                var ordersHub = $.connection.ordersHub;

                $.connection.hub.start().done
                (
                    function ()
                    {
                        $('#status').html('Connected as ' + $.connection.hub.id);

                        $('#newOrder').click
                        (
                            function ()
                            {
                                var orderRef = $('#orderRef').val();
                                var result = ordersHub.server.newOrder(orderRef);

                                $('#newOrderResult').html(result);
                            }
                        );

                        $('#orderCompleted').click
                        (
                            function ()
                            {
                                var orderRef = $('#orderRef').val();
                                ordersHub.server.orderCompleted(orderRef, 12345);
                            }
                        );
                    }
                );

                $.connection.hub.start().fail
                (
                    function ()
                    {
                        $('#status').html('Connect failed');
                    }
                );
            }
        );

    </script>

</head>
<body>

    <p id="status"></p>

    <label for="orderRef">Order ref:</label>
    <input type="text" id="orderRef" />
    <br />
    <a href="#" id="newOrder">New Order</a>
    <br />
    <a href="#" id="orderCompleted">Order completed</a>

</body>
</html>
