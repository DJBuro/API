var gauge00; var gauge01; var gauge02; var gauge03; var gauge04; var gauge00DataTable; var gauge01DataTable; var gauge02DataTable; var gauge03DataTable; var gauge04DataTable; function drawGauge() { gauge00DataTable = new google.visualization.DataTable(); gauge01DataTable = new google.visualization.DataTable(); gauge02DataTable = new google.visualization.DataTable(); gauge03DataTable = new google.visualization.DataTable(); gauge04DataTable = new google.visualization.DataTable(); gauge00 = new google.visualization.Gauge(document.getElementById("gauge00")); gauge01 = new google.visualization.Gauge(document.getElementById("gauge01")); gauge02 = new google.visualization.Gauge(document.getElementById("gauge02")); gauge03 = new google.visualization.Gauge(document.getElementById("gauge03")); gauge04 = new google.visualization.Gauge(document.getElementById("gauge04")); } google.setOnLoadCallback(drawGauge); function updateGauge00(a) { if (a == null) { return false; } gauge00DataTable.addColumn("number", a.Name); gauge00DataTable.addRows(1); gauge00DataTable.setValue(0, 0, a.CurrentValue); gaugeOptions00 = { min: 0, max: a.MaxValue, redFrom: 0, redTo: a.Benchmark - 10, yellowFrom: a.Benchmark - 10, yellowTo: a.Benchmark, greenFrom: a.Benchmark, greenTo: a.MaxValue, minorTicks: 5 }; gauge00.draw(gauge00DataTable, gaugeOptions00); updateSiteRanking(a.TopSite, "#top00"); if (a.BottomSite != null) { updateSiteRanking(a.BottomSite, "#bot00"); } if (a.CurrentValue != null) { updateGaugeRanking(a.CurrentValue, "#gauge00"); } if (a.SiteRank == null) { return false; } $("#siteRank00").html("Site: " + a.SiteRank); if (a.RegionRank == null) { return false; } $("#regionRank00").html("Region: " + a.RegionRank); return false; } function updateGauge01(a) { if (a == null) { return false; } gauge01DataTable.addColumn("number", a.Name); gauge01DataTable.addRows(1); gauge01DataTable.setValue(0, 0, a.CurrentValue); gaugeOptions01 = { min: 0, max: a.MaxValue, redFrom: 0, redTo: a.Benchmark - 10, yellowFrom: a.Benchmark - 10, yellowTo: a.Benchmark, greenFrom: a.Benchmark, greenTo: a.MaxValue, minorTicks: 5 }; gauge01.draw(gauge01DataTable, gaugeOptions01); updateSiteRanking(a.TopSite, "#top10"); if (a.BottomSite != null) { updateSiteRanking(a.BottomSite, "#bot10"); } if (a.CurrentValue != null) { updateGaugeRanking(a.CurrentValue, "#gauge01"); } if (a.SiteRank == null) { return false; } $("#siteRank01").html("Site: " + a.SiteRank); if (a.RegionRank == null) { return false; } $("#regionRank01").html("Region: " + a.RegionRank); return false; } function updateGauge02(a) { if (a == null) { return false; } gauge02DataTable.addColumn("number", a.Name); gauge02DataTable.addRows(1); gauge02DataTable.setValue(0, 0, a.CurrentValue); gaugeOptions02 = { min: 0, max: a.MaxValue, redFrom: 0, redTo: a.Benchmark - 10, yellowFrom: a.Benchmark - 10, yellowTo: a.Benchmark, greenFrom: a.Benchmark, greenTo: a.MaxValue, minorTicks: 5 }; gauge02.draw(gauge02DataTable, gaugeOptions02); updateSiteRanking(a.TopSite, "#top20"); if (a.BottomSite != null) { updateSiteRanking(a.BottomSite, "#bot20"); } if (a.CurrentValue != null) { updateGaugeRanking(a.CurrentValue, "#gauge02"); } if (a.SiteRank == null) { return false; } $("#siteRank02").html("Site: " + a.SiteRank); if (a.RegionRank == null) { return false; } $("#regionRank02").html("Region: " + a.RegionRank); return false; } function updateGauge03(a) { if (a == null) { return false; } gauge03DataTable.addColumn("number", a.Name); gauge03DataTable.addRows(1); gauge03DataTable.setValue(0, 0, a.CurrentValue); gaugeOptions03 = { min: 0, max: a.MaxValue, redFrom: 0, redTo: a.Benchmark - 10, yellowFrom: a.Benchmark - 10, yellowTo: a.Benchmark, greenFrom: a.Benchmark, greenTo: a.MaxValue, minorTicks: 5 }; gauge03.draw(gauge03DataTable, gaugeOptions03); updateSiteRanking(a.TopSite, "#top30"); if (a.BottomSite != null) { updateSiteRanking(a.BottomSite, "#bot30"); } if (a.CurrentValue != null) { updateGaugeRanking(a.CurrentValue, "#gauge03"); } if (a.SiteRank == null) { return false; } $("#siteRank03").html("Site: " + a.SiteRank); if (a.RegionRank == null) { return false; } $("#regionRank03").html("Region: " + a.RegionRank); return false; } function updateGauge04(a) { if (a == null) { return false; } gauge04DataTable.addColumn("number", a.Name); gauge04DataTable.addRows(1); gauge04DataTable.setValue(0, 0, a.CurrentValue); gaugeOptions04 = { min: 0, max: a.MaxValue, redFrom: 0, redTo: a.Benchmark - 10, yellowFrom: a.Benchmark - 10, yellowTo: a.Benchmark, greenFrom: a.Benchmark, greenTo: a.MaxValue, minorTicks: 5 }; gauge04.draw(gauge04DataTable, gaugeOptions04); updateSiteRanking(a.TopSite, "#top40"); if (a.BottomSite != null) { updateSiteRanking(a.BottomSite, "#bot40"); } if (a.CurrentValue != null) { updateGaugeRanking(a.CurrentValue, "#gauge04"); } if (a.SiteRank == null) { return false; } $("#siteRank04").html("Site: " + a.SiteRank); if (a.RegionRank == null) { return false; } $("#regionRank04").html("Region: " + a.RegionRank); return false; } function updateSiteRanking(b, a) { $.each(b, function(d, c) { if (c.indicatorType == "euro") { $(a + d).html(c.rank + ". " + c.name + " <strong>€" + c.indicator.toFixed(2) + "</strong>"); } else { if (c.indicatorType == "pound") { $(a + d).html(c.rank + ". " + c.name + " <strong>£" + c.indicator.toFixed(2) + "</strong>"); } else { $(a + d).html(c.rank + ". " + c.name + " <strong>" + c.indicator + "" + c.indicatorType + "</strong>"); } } }); return false; } function updateGaugeRanking(b, a) { if ($(a).data("value")) { if (b == $(a).data("value")) { $(a + "Rank").html('<img src="../../Content/imgs/same.gif" />'); } if (b > $(a).data("value")) { $(a + "Rank").html('<img src="../../Content/imgs/up.gif" />'); } if (b < $(a).data("value")) { $(a + "Rank").html('<img src="../../Content/imgs/down.gif" />'); } $(a).data("value", b); } else { $(a).data("value", b); $(a + "Rank").html('<img src="../../Content/imgs/up.gif" />'); } return false; } function updateDashboard(a) { updateGauge00(a.Gauges[0]); updateGauge01(a.Gauges[1]); updateGauge02(a.Gauges[2]); updateGauge03(a.Gauges[3]); updateGauge04(a.Gauges[4]); return false; } function updateScollingOTDData(a) { $("#scrollOTD").html(a); return false; } function UpdateScrollingTicketsData(a) { $("#scrollTickets").html(a); return false; } function updateScollingOPDData(a) { $("#scrollOPD").html(a); return false; } function setHeight(a) { var b = 0; a = $(a); a.each(function() { if ($(this).width() > b) { b = $(this).width(); } }); a.height(b); return false; } function setPointerWidth(c, a) { var b = 0; c = $(c); c.width(a - 10); return false; }